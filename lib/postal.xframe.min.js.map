{"version":3,"sources":["postal.xframe.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","listener","plugin","routeMessage","apply","arguments","listenToWorker","worker","_lodash2","include","_state","state","workers","addEventListener","push","_lodash","_postal","_postal2","_utils","_XFrameClient","_XFrameClient2","getInstance","source","origin","instanceId","client","isWorker","Worker","options","target","NO_OP","fedx","transports","xframe","eagerSerialize","env","useEagerSerialize","XFrameClient","configure","cfg","config","defaults","extend","clearConfiguration","getTargets","postMessage","targets","map","document","getElementsByTagName","i","urlHack","createElement","href","src","protocol","host","contentWindow","defaultOriginUrl","window","parent","concat","remotes","wrapForTransport","packingSlip","JSON","stringify","postal","unwrapFromTransport","msgData","indexOf","parse","ex","event","currentTarget","parsed","data","remote","find","x","onMessage","sendMessage","envelope","safeSerialize","cloneDeep","each","disconnect","clients","reduce","isArray","_memoRemoteByInstanceId","_memoRemoteByTarget","doNotNotify","_disconnectClient","without","signalReady","callback","length","def","sendPing","eventName","handler","bubble","Error","stopListeningToWorker","removeEventListener","pop","memo","proxy","tgt","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","entries","Symbol","iterator","next","done","_step$value","_slicedToArray","value","key","val","isPlainObject","err","Object","defineProperty","_typeof","constructor","prototype","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","Array","TypeError","regeneratorRuntime","mark","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","k","wrap","_context","prev","keys","t0","finish","stop","location","test","navigator","userAgent","allowedOrigins","enabled","_classCallCheck","instance","Constructor","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_postal$fedx$Federati","_ref","_len","args","_key","_this","getPrototypeOf","transportName","hasDomainFilters","contains","shouldProcess","context","FederationClient"],"mappings":"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","file":"postal.xframe.min.js","sourcesContent":["/*!\n *  * postal.xframe - postal.js/postal.federation plugin for federating instances of postal.js across iframe/window boundaries.\n *  * Author: Jim Cowart (http://ifandelse.com)\n *  * Version: v0.5.0\n *  * Url: http://github.com/postaljs/postal.xframe\n *  * License(s): (MIT OR GPL-2.0)\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"postal\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"postal\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"postalXframe\"] = factory(require(\"lodash\"), require(\"postal\"));\n\telse\n\t\troot[\"postalXframe\"] = factory(root[\"_\"], root[\"postal\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore next*/\"use strict\";\n\t\n\tvar /*istanbul ignore next*/_lodash = __webpack_require__(1);\n\t\n\t/*istanbul ignore next*/var _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar /*istanbul ignore next*/_postal = __webpack_require__(2);\n\t\n\t/*istanbul ignore next*/var _postal2 = _interopRequireDefault(_postal);\n\t\n\tvar /*istanbul ignore next*/_utils = __webpack_require__(3);\n\t\n\tvar /*istanbul ignore next*/_state = __webpack_require__(4);\n\t\n\tvar /*istanbul ignore next*/_XFrameClient = __webpack_require__(5);\n\t\n\t/*istanbul ignore next*/var _XFrameClient2 = _interopRequireDefault(_XFrameClient);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction listener() {\n\t\tplugin.routeMessage.apply(plugin, arguments);\n\t}\n\t\n\tfunction listenToWorker(worker) {\n\t\tif (! /*istanbul ignore next*/_lodash2.default.include( /*istanbul ignore next*/_state.state.workers, worker)) {\n\t\t\tworker.addEventListener(\"message\", listener);\n\t\t\t/*istanbul ignore next*/_state.state.workers.push(worker);\n\t\t}\n\t}\n\t\n\t/*istanbul ignore next*/_XFrameClient2.default.getInstance = function getInstance(source, origin, instanceId) {\n\t\tvar client = new /*istanbul ignore next*/_XFrameClient2.default(source, {\n\t\t\torigin: origin,\n\t\t\tisWorker: typeof Worker !== \"undefined\" && source instanceof Worker\n\t\t}, instanceId);\n\t\tif (client.options.isWorker) {\n\t\t\tlistenToWorker(client.target);\n\t\t}\n\t\treturn client;\n\t};\n\t\n\tvar NO_OP = function NO_OP() {};\n\t\n\tvar plugin = /*istanbul ignore next*/_postal2.default.fedx.transports.xframe = {\n\t\teagerSerialize: /*istanbul ignore next*/_state.env.useEagerSerialize,\n\t\tXFrameClient: /*istanbul ignore next*/_XFrameClient2.default,\n\t\tconfigure: function /*istanbul ignore next*/configure(cfg) {\n\t\t\tif (cfg) {\n\t\t\t\t/*istanbul ignore next*/_state.state.config = /*istanbul ignore next*/_lodash2.default.defaults( /*istanbul ignore next*/_lodash2.default.extend( /*istanbul ignore next*/_state.state.config, cfg), /*istanbul ignore next*/_state.state.defaults);\n\t\t\t}\n\t\t\treturn (/*istanbul ignore next*/_state.state.config\n\t\t\t);\n\t\t},\n\t\tclearConfiguration: function /*istanbul ignore next*/clearConfiguration() {\n\t\t\t/*istanbul ignore next*/_state.state.config = /*istanbul ignore next*/_lodash2.default.extend({}, /*istanbul ignore next*/_state.state.defaults);\n\t\t},\n\t\t//find all iFrames and the parent window if in an iframe\n\t\tgetTargets: /*istanbul ignore next*/_state.env.isWorker ? function () {\n\t\t\treturn [{\n\t\t\t\ttarget: {\n\t\t\t\t\tpostMessage: postMessage\n\t\t\t\t}\n\t\t\t}]; // TO-DO: look into this...\n\t\t} : function () {\n\t\t\tvar targets = /*istanbul ignore next*/_lodash2.default.map(document.getElementsByTagName(\"iframe\"), function (i) {\n\t\t\t\tvar urlHack = document.createElement(\"a\");\n\t\t\t\turlHack.href = i.src;\n\t\t\t\tvar origin = urlHack.protocol + \"//\" + urlHack.host;\n\t\t\t\t// The following condition fixes the IE issue of setting the origin while the iframe is 'empty':\n\t\t\t\t// if the iframe has no 'src' set to some meaningful url (at this very moment),\n\t\t\t\t// then the urlHack returns neither protocol nor host information.\n\t\t\t\tif (origin === \"//\") {\n\t\t\t\t\torigin = null;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttarget: i.contentWindow,\n\t\t\t\t\torigin: origin || /*istanbul ignore next*/_state.state.config.defaultOriginUrl\n\t\t\t\t};\n\t\t\t});\n\t\t\tif (window.parent && window.parent !== window) {\n\t\t\t\ttargets.push({\n\t\t\t\t\ttarget: window.parent,\n\t\t\t\t\torigin: \"*\"\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn targets.concat( /*istanbul ignore next*/_state.state.workers);\n\t\t},\n\t\tremotes: [],\n\t\twrapForTransport: /*istanbul ignore next*/_state.env.useEagerSerialize ? function (packingSlip) {\n\t\t\treturn JSON.stringify({\n\t\t\t\tpostal: true,\n\t\t\t\tpackingSlip: packingSlip\n\t\t\t});\n\t\t} : function (packingSlip) {\n\t\t\treturn {\n\t\t\t\tpostal: true,\n\t\t\t\tpackingSlip: packingSlip\n\t\t\t};\n\t\t},\n\t\tunwrapFromTransport: function /*istanbul ignore next*/unwrapFromTransport(msgData) {\n\t\t\tif (typeof msgData === \"string\" && ( /*istanbul ignore next*/_state.env.useEagerSerialize || msgData.indexOf('\"postal\":true') !== -1)) {\n\t\t\t\ttry {\n\t\t\t\t\treturn JSON.parse(msgData);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn msgData;\n\t\t\t}\n\t\t},\n\t\trouteMessage: function /*istanbul ignore next*/routeMessage(event) {\n\t\t\t// source = remote window or worker?\n\t\t\tvar source = event.source || event.currentTarget;\n\t\t\tvar parsed = this.unwrapFromTransport(event.data);\n\t\t\tif (parsed.postal) {\n\t\t\t\tvar remote = /*istanbul ignore next*/_lodash2.default.find(this.remotes, function (x) {\n\t\t\t\t\treturn x.target === source;\n\t\t\t\t});\n\t\t\t\tif (!remote) {\n\t\t\t\t\tremote = /*istanbul ignore next*/_XFrameClient2.default.getInstance(source, event.origin, parsed.packingSlip.instanceId);\n\t\t\t\t\tthis.remotes.push(remote);\n\t\t\t\t}\n\t\t\t\tremote.onMessage(parsed.packingSlip);\n\t\t\t}\n\t\t},\n\t\tsendMessage: function /*istanbul ignore next*/sendMessage(env) {\n\t\t\tvar envelope = env;\n\t\t\tif ( /*istanbul ignore next*/_state.state.config.safeSerialize) {\n\t\t\t\tenvelope = /*istanbul ignore next*/(0, _utils.safeSerialize)( /*istanbul ignore next*/_lodash2.default.cloneDeep(env));\n\t\t\t}\n\t\t\t/*istanbul ignore next*/_lodash2.default.each(this.remotes, function (remote) {\n\t\t\t\tremote.sendMessage(envelope);\n\t\t\t});\n\t\t},\n\t\tdisconnect: function /*istanbul ignore next*/disconnect(options) {\n\t\t\toptions = options || {};\n\t\t\tvar clients = options.instanceId ?\n\t\t\t// an instanceId value or array was provided, let's get the client proxy instances for the id(s)\n\t\t\t/*istanbul ignore next*/_lodash2.default.reduce( /*istanbul ignore next*/_lodash2.default.isArray(options.instanceId) ? options.instanceId : [options.instanceId], /*istanbul ignore next*/_utils._memoRemoteByInstanceId, [], this) :\n\t\t\t// Ok so we don't have instanceId(s), let's try target(s)\n\t\t\toptions.target ?\n\t\t\t// Ok, so we have a targets array, we need to iterate over it and get a list of the proxy/client instances\n\t\t\t/*istanbul ignore next*/_lodash2.default.reduce( /*istanbul ignore next*/_lodash2.default.isArray(options.target) ? options.target : [options.target], /*istanbul ignore next*/_utils._memoRemoteByTarget, [], this) :\n\t\t\t// aww, heck - we don't have instanceId(s) or target(s), so it's ALL THE REMOTES\n\t\t\tthis.remotes;\n\t\t\tif (!options.doNotNotify) {\n\t\t\t\t/*istanbul ignore next*/_lodash2.default.each(clients, /*istanbul ignore next*/_utils._disconnectClient, this);\n\t\t\t}\n\t\t\tthis.remotes = /*istanbul ignore next*/_lodash2.default.without.apply(null, [this.remotes].concat(clients));\n\t\t},\n\t\tsignalReady: function /*istanbul ignore next*/signalReady(targets, callback) {\n\t\t\ttargets = /*istanbul ignore next*/_lodash2.default.isArray(targets) ? targets : [targets];\n\t\t\ttargets = targets.length ? targets : this.getTargets();\n\t\t\tcallback = callback || NO_OP;\n\t\t\t/*istanbul ignore next*/_lodash2.default.each(targets, function (def) {\n\t\t\t\tif (def.target) {\n\t\t\t\t\tdef.origin = def.origin || /*istanbul ignore next*/_state.state.config.defaultOriginUrl;\n\t\t\t\t\tvar remote = /*istanbul ignore next*/_lodash2.default.find(this.remotes, function (x) {\n\t\t\t\t\t\treturn x.target === def.target;\n\t\t\t\t\t});\n\t\t\t\t\tif (!remote) {\n\t\t\t\t\t\tremote = /*istanbul ignore next*/_XFrameClient2.default.getInstance(def.target, def.origin);\n\t\t\t\t\t\tthis.remotes.push(remote);\n\t\t\t\t\t}\n\t\t\t\t\tremote.sendPing(callback);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\t\taddEventListener: /*istanbul ignore next*/_state.env.isWorker ? function () {\n\t\t\taddEventListener(\"message\", listener);\n\t\t} : function (eventName, handler, bubble) {\n\t\t\t// in normal browser context\n\t\t\tif (typeof window !== \"undefined\" && typeof window.addEventListener === \"function\") {\n\t\t\t\twindow.addEventListener(eventName, handler, bubble);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"postal.xframe only works with browsers that support window.addEventListener\");\n\t\t\t}\n\t\t},\n\t\tlistenToWorker: listenToWorker,\n\t\tstopListeningToWorker: function /*istanbul ignore next*/stopListeningToWorker(worker) {\n\t\t\tif (worker) {\n\t\t\t\tworker.removeEventListener(\"message\", listener);\n\t\t\t\t/*istanbul ignore next*/_state.state.workers = /*istanbul ignore next*/_lodash2.default.without( /*istanbul ignore next*/_state.state.workers, worker);\n\t\t\t} else {\n\t\t\t\twhile ( /*istanbul ignore next*/_state.state.workers.length) {\n\t\t\t\t\t/*istanbul ignore next*/_state.state.workers.pop().removeEventListener(\"message\", listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\tplugin.addEventListener(\"message\", listener, false);\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore next*/\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.entries = undefined;\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\texports._memoRemoteByInstanceId = _memoRemoteByInstanceId;\n\t/*istanbul ignore next*/exports._memoRemoteByTarget = _memoRemoteByTarget;\n\t/*istanbul ignore next*/exports._disconnectClient = _disconnectClient;\n\t/*istanbul ignore next*/exports.safeSerialize = safeSerialize;\n\t\n\tvar /*istanbul ignore next*/_lodash = __webpack_require__(1);\n\t\n\t/*istanbul ignore next*/var _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _memoRemoteByInstanceId(memo, instanceId) {\n\t\tvar proxy = /*istanbul ignore next*/_lodash2.default.find(this.remotes, function (x) {\n\t\t\treturn x.instanceId === instanceId;\n\t\t});\n\t\tif (proxy) {\n\t\t\tmemo.push(proxy);\n\t\t}\n\t\treturn memo;\n\t}\n\t\n\tfunction _memoRemoteByTarget(memo, tgt) {\n\t\tvar proxy = /*istanbul ignore next*/_lodash2.default.find(this.remotes, function (x) {\n\t\t\treturn x.target === tgt;\n\t\t});\n\t\tif (proxy) {\n\t\t\tmemo.push(proxy);\n\t\t}\n\t\treturn memo;\n\t}\n\t\n\tfunction _disconnectClient(client) {\n\t\tclient.disconnect();\n\t}\n\t\n\tfunction safeSerialize(envelope) {\n\t\t/*istanbul ignore next*/var _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\t\n\t\ttry {\n\t\t\tfor ( /*istanbul ignore next*/var _iterator = entries(envelope)[Symbol.iterator](), _step; /*istanbul ignore next*/!(_iteratorNormalCompletion = (_step = _iterator.next()).done); /*istanbul ignore next*/_iteratorNormalCompletion = true) {\n\t\t\t\t/*istanbul ignore next*/var _step$value = _slicedToArray(_step.value, 2),\n\t\t\t\t    key = _step$value[0],\n\t\t\t\t    val = _step$value[1];\n\t\n\t\t\t\tif (typeof val === \"function\") {\n\t\t\t\t\tdelete envelope[key];\n\t\t\t\t}\n\t\t\t\tif ( /*istanbul ignore next*/_lodash2.default.isPlainObject(val)) {\n\t\t\t\t\tsafeSerialize(val);\n\t\t\t\t}\n\t\t\t\tif ( /*istanbul ignore next*/_lodash2.default.isArray(val)) {\n\t\t\t\t\t/*istanbul ignore next*/_lodash2.default.each(val, safeSerialize);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t_iterator.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn envelope;\n\t}\n\t\n\tvar entries = /*istanbul ignore next*/exports.entries = regeneratorRuntime.mark(function entries(obj) /*istanbul ignore next*/{\n\t\tvar _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, k;\n\t\n\t\treturn regeneratorRuntime.wrap(function entries$(_context) {\n\t\t\twhile (1) {\n\t\t\t\tswitch (_context.prev = _context.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tif ([\"object\", \"function\"].indexOf( /*istanbul ignore next*/typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj)) === -1) {\n\t\t\t\t\t\t\tobj = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_iteratorNormalCompletion2 = true;\n\t\t\t\t\t\t_didIteratorError2 = false;\n\t\t\t\t\t\t_iteratorError2 = undefined;\n\t\t\t\t\t\t_context.prev = 4;\n\t\t\t\t\t\t_iterator2 = Object.keys(obj)[Symbol.iterator]();\n\t\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tif (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n\t\t\t\t\t\t\t_context.next = 13;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tk = _step2.value;\n\t\t\t\t\t\t_context.next = 10;\n\t\t\t\t\t\treturn [k, obj[k]];\n\t\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\t_iteratorNormalCompletion2 = true;\n\t\t\t\t\t\t_context.next = 6;\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t_context.next = 19;\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 15:\n\t\t\t\t\t\t_context.prev = 15;\n\t\t\t\t\t\t_context.t0 = _context[\"catch\"](4);\n\t\t\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t\t\t_iteratorError2 = _context.t0;\n\t\n\t\t\t\t\tcase 19:\n\t\t\t\t\t\t_context.prev = 19;\n\t\t\t\t\t\t_context.prev = 20;\n\t\n\t\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\tcase 22:\n\t\t\t\t\t\t_context.prev = 22;\n\t\n\t\t\t\t\t\tif (!_didIteratorError2) {\n\t\t\t\t\t\t\t_context.next = 25;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tthrow _iteratorError2;\n\t\n\t\t\t\t\tcase 25:\n\t\t\t\t\t\treturn _context.finish(22);\n\t\n\t\t\t\t\tcase 26:\n\t\t\t\t\t\treturn _context.finish(19);\n\t\n\t\t\t\t\tcase 27:\n\t\t\t\t\tcase \"end\":\n\t\t\t\t\t\treturn _context.stop();\n\t\t\t\t}\n\t\t\t}\n\t\t}, entries, this, [[4, 15, 19, 27], [20,, 22, 26]]);\n\t});\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore next*/\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.state = exports.env = undefined;\n\t\n\tvar /*istanbul ignore next*/_lodash = __webpack_require__(1);\n\t\n\t/*istanbul ignore next*/var _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar env = /*istanbul ignore next*/exports.env = {\n\t\torigin: location.origin || location.protocol + \"//\" + location.host,\n\t\tisWorker: typeof window === \"undefined\" && postMessage && location,\n\t\t// I know, I KNOW. The alternative was very expensive perf & time-wise\n\t\t// so I saved you a perf hit by checking the stinking UA. Sigh.\n\t\t// I sought the opinion of several other devs. We all traveled\n\t\t// to the far east to consult with the wisdom of a monk - turns\n\t\t// out he didn\"t know JavaScript, and our passports were stolen on the\n\t\t// return trip. We stowed away aboard a freighter headed back to the\n\t\t// US and by the time we got back, no one had heard of IE 8 or 9. True story.\n\t\tuseEagerSerialize: /MSIE [8,9]/.test(navigator.userAgent)\n\t};\n\t\n\tvar defaults = {\n\t\tallowedOrigins: [env.origin],\n\t\tenabled: true,\n\t\tdefaultOriginUrl: \"*\",\n\t\tsafeSerialize: false\n\t};\n\t\n\tvar state = /*istanbul ignore next*/exports.state = {\n\t\tworkers: [],\n\t\tconfig: /*istanbul ignore next*/_lodash2.default.extend({}, defaults),\n\t\tdefaults: defaults\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore next*/\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar /*istanbul ignore next*/_postal = __webpack_require__(2);\n\t\n\t/*istanbul ignore next*/var _postal2 = _interopRequireDefault(_postal);\n\t\n\tvar /*istanbul ignore next*/_lodash = __webpack_require__(1);\n\t\n\t/*istanbul ignore next*/var _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar /*istanbul ignore next*/_state = __webpack_require__(4);\n\t\n\t/*istanbul ignore next*/function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar XFrameClient = function (_postal$fedx$Federati) {\n\t\t_inherits(XFrameClient, _postal$fedx$Federati);\n\t\n\t\tfunction /*istanbul ignore next*/XFrameClient() {\n\t\t\t/*istanbul ignore next*/var _ref;\n\t\n\t\t\t_classCallCheck(this, XFrameClient);\n\t\n\t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\targs[_key] = arguments[_key];\n\t\t\t}\n\t\n\t\t\t/*istanbul ignore next*/var _this = _possibleConstructorReturn(this, (_ref = XFrameClient.__proto__ || Object.getPrototypeOf(XFrameClient)).call.apply(_ref, [this].concat(args)));\n\t\n\t\t\t/*istanbul ignore next*/_this.transportName = \"xframe\";\n\t\t\t/*istanbul ignore next*/return _this;\n\t\t}\n\t\n\t\t_createClass(XFrameClient, [{\n\t\t\tkey: \"shouldProcess\",\n\t\t\tvalue: function shouldProcess() {\n\t\t\t\tvar hasDomainFilters = !! /*istanbul ignore next*/_state.state.config.allowedOrigins.length;\n\t\t\t\treturn (/*istanbul ignore next*/_state.state.config.enabled && (\n\t\t\t\t\t// another frame/window\n\t\t\t\t\tthis.options.origin === \"*\" || hasDomainFilters && /*istanbul ignore next*/_lodash2.default.contains( /*istanbul ignore next*/_state.state.config.allowedOrigins, this.options.origin) || !hasDomainFilters ||\n\t\t\t\t\t// worker\n\t\t\t\t\tthis.options.isWorker && /*istanbul ignore next*/_lodash2.default.contains( /*istanbul ignore next*/_state.state.workers, this.target) ||\n\t\t\t\t\t// we are in a worker\n\t\t\t\t\t/*istanbul ignore next*/_state.env.isWorker)\n\t\t\t\t);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"send\",\n\t\t\tvalue: function send(packingSlip) {\n\t\t\t\tif (this.shouldProcess()) {\n\t\t\t\t\tvar context = /*istanbul ignore next*/_state.env.isWorker ? null : this.target;\n\t\t\t\t\tvar args = [/*istanbul ignore next*/_postal2.default.fedx.transports.xframe.wrapForTransport(packingSlip)];\n\t\t\t\t\tif (!this.options.isWorker && ! /*istanbul ignore next*/_state.env.isWorker) {\n\t\t\t\t\t\targs.push(this.options.origin);\n\t\t\t\t\t}\n\t\t\t\t\tif (! /*istanbul ignore next*/_state.env.isWorker) {\n\t\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\t\tthis.target.postMessage(args[0]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.target.postMessage(args[0], args[1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.target.postMessage.apply(context, args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn XFrameClient;\n\t}( /*istanbul ignore next*/_postal2.default.fedx.FederationClient);\n\t\n\t/*istanbul ignore next*/exports.default = XFrameClient;\n\n/***/ }\n/******/ ])\n});\n;"]}